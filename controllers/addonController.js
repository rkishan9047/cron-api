import axios from 'axios';
import { getNewAccessToken } from '../services/tokenService.js';
import dotenv from 'dotenv';

dotenv.config();

const subscriptions = [
    "50049D65-CD2D-F011-A83B-000D3AADDE39",
    "0628D1AD-CD2D-F011-A83B-000D3AADDE39",
    "1344D7AD-CD2D-F011-A83D-000D3A28753D",
    "EFE7D3AB-CD2D-F011-A83A-000D3ABC4CF8",
    "1028D1AD-CD2D-F011-A83B-000D3AADDE39",
    "F8E7D3AB-CD2D-F011-A83A-000D3ABC4CF8",
    "0444D7AD-CD2D-F011-A83D-000D3A28753D",
    "2128D1AD-CD2D-F011-A83B-000D3AADDE39",
    "1428D1AD-CD2D-F011-A83B-000D3AADDE39",
    "0244D7AD-CD2D-F011-A83D-000D3A28753D",
    "8A7AE7D1-CD2D-F011-A83A-000D3ABC4CF8",
    "B448F2D1-CD2D-F011-A83B-000D3AADDE39",
    "937AE7D1-CD2D-F011-A83A-000D3ABC4CF8",
    "E734F7D1-CD2D-F011-A83D-000D3A28753D",
    "A248F2D1-CD2D-F011-A83B-000D3AADDE39",
    "817AE7D1-CD2D-F011-A83A-000D3ABC4CF8",
    "AB48F2D1-CD2D-F011-A83B-000D3AADDE39",
    "CFEC28F6-CD2D-F011-A83D-000D3A28753D",
    "70F80FF6-CD2D-F011-A83B-000D3AADDE39",
    "90506C14-CE2D-F011-A83B-000D3AADDE39",
    "5C06421A-CE2D-F011-A83D-000D3A28753D",
    "5A06421A-CE2D-F011-A83D-000D3A28753D",
    "8E506C14-CE2D-F011-A83B-000D3AADDE39",
    "7306421A-CE2D-F011-A83D-000D3A28753D",
    "6306421A-CE2D-F011-A83D-000D3A28753D",
    "7B99553E-CE2D-F011-A83D-000D3A28753D",
    "5109583E-CE2D-F011-A83A-000D3ABC4CF8",
    "6399553E-CE2D-F011-A83D-000D3A28753D",
    "5909583E-CE2D-F011-A83A-000D3ABC4CF8",
    "8499553E-CE2D-F011-A83D-000D3A28753D",
    "5352663E-CE2D-F011-A83B-000D3AADDE39",
    "4A52663E-CE2D-F011-A83B-000D3AADDE39",
    "7299553E-CE2D-F011-A83D-000D3A28753D",
    "5C52663E-CE2D-F011-A83B-000D3AADDE39",
    "6199553E-CE2D-F011-A83D-000D3A28753D",
    "1F147C62-CE2D-F011-A83B-000D3AADDE39",
    "17147C62-CE2D-F011-A83B-000D3AADDE39",
    "D25FA386-CE2D-F011-A83B-000D3AADDE39",
    "4D85F9A8-CE2D-F011-A83D-000D3A28753D",
    "DEACD4AA-CE2D-F011-A83A-000D3ABC4CF8",
    "8F26E4AA-CE2D-F011-A83B-000D3AADDE39",
    "E7ACD4AA-CE2D-F011-A83A-000D3ABC4CF8",
    "4B85F9A8-CE2D-F011-A83D-000D3A28753D",
    "7A592ACC-CE2D-F011-A83D-000D3A28753D",
    "83592ACC-CE2D-F011-A83D-000D3A28753D",
    "D38FA8CE-CE2D-F011-A83A-000D3ABC4CF8",
    "B8999ECE-CE2D-F011-A83B-000D3AADDE39",
    "89D49614-CF2D-F011-A83B-000D3AADDE39",
    "86B4A117-CF2D-F011-A83A-000D3ABC4CF8",
    "8BD49614-CF2D-F011-A83B-000D3AADDE39",
    "9BC4E717-CF2D-F011-A83D-000D3A28753D",
    "8AB4A117-CF2D-F011-A83A-000D3ABC4CF8",
    "9AD49614-CF2D-F011-A83B-000D3AADDE39",
    "C4F8B73B-CF2D-F011-A83A-000D3ABC4CF8",
    "7EA7AA3B-CF2D-F011-A83D-000D3A28753D",
    "D2AB6B36-CF2D-F011-A83B-000D3AADDE39",
    "BBF8B73B-CF2D-F011-A83A-000D3ABC4CF8",
    "75A7AA3B-CF2D-F011-A83D-000D3A28753D",
    "A9F8B73B-CF2D-F011-A83A-000D3ABC4CF8",
    "B2F8B73B-CF2D-F011-A83A-000D3ABC4CF8",
    "6FFB255B-CF2D-F011-A83B-000D3AADDE39",
    "80FB255B-CF2D-F011-A83B-000D3AADDE39",
    "74FB255B-CF2D-F011-A83B-000D3AADDE39",
    "7BB5CC5F-CF2D-F011-A83A-000D3ABC4CF8",
    "8CB5CC5F-CF2D-F011-A83A-000D3ABC4CF8",
    "7DB5CC5F-CF2D-F011-A83A-000D3ABC4CF8",
    "D07D1484-CF2D-F011-A83A-000D3ABC4CF8",
    "41D41182-CF2D-F011-A83D-000D3A28753D",
    "43F92B82-CF2D-F011-A83B-000D3AADDE39",
    "4EE427A8-CF2D-F011-A83B-000D3AADDE39",
    "70B421A8-CF2D-F011-A83A-000D3ABC4CF8",
    "37E427A8-CF2D-F011-A83B-000D3AADDE39",
    "3BE427A8-CF2D-F011-A83B-000D3AADDE39",
    "72B421A8-CF2D-F011-A83A-000D3ABC4CF8",
    "79B421A8-CF2D-F011-A83A-000D3ABC4CF8",
    "35E427A8-CF2D-F011-A83B-000D3AADDE39",
    "57E427A8-CF2D-F011-A83B-000D3AADDE39",
    "3049A4F0-CF2D-F011-A83B-000D3AADDE39",
    "5DE0A1EF-CF2D-F011-A83D-000D3A28753D",
    "FA46AA14-D02D-F011-A83D-000D3A28753D",
    "0347AA14-D02D-F011-A83D-000D3A28753D",
    "40BEC314-D02D-F011-A83B-000D3AADDE39",
    "F146AA14-D02D-F011-A83D-000D3A28753D",
    "37BEC314-D02D-F011-A83B-000D3AADDE39",
    "6DD5C214-D02D-F011-A83A-000D3ABC4CF8",
    "F58A0339-D02D-F011-A83D-000D3A28753D",
    "1CE85F35-D02D-F011-A83A-000D3ABC4CF8",
    "25E85F35-D02D-F011-A83A-000D3ABC4CF8",
    "35E2FD38-D02D-F011-A83B-000D3AADDE39",
    "E38A0339-D02D-F011-A83D-000D3A28753D",
    "EC8A0339-D02D-F011-A83D-000D3A28753D",
    "7ED73C5D-D02D-F011-A83D-000D3A28753D",
    "6125625D-D02D-F011-A83A-000D3ABC4CF8",
    "089B2C59-D02D-F011-A83B-000D3AADDE39",
    "16F4A081-D02D-F011-A83A-000D3ABC4CF8",
    "09268E81-D02D-F011-A83D-000D3A28753D",
    "91F0AD81-D02D-F011-A83B-000D3AADDE39",
    "93F0AD81-D02D-F011-A83B-000D3AADDE39",
    "13F4A081-D02D-F011-A83A-000D3ABC4CF8",
    "5623B7A5-D02D-F011-A83D-000D3A28753D",
    "5922C0A5-D02D-F011-A83A-000D3ABC4CF8",
    "4423B7A5-D02D-F011-A83D-000D3A28753D",
    "4D23B7A5-D02D-F011-A83D-000D3A28753D",
    "3822C0A5-D02D-F011-A83A-000D3ABC4CF8",
    "B215B2A4-D02D-F011-A83B-000D3AADDE39",
    "5022C0A5-D02D-F011-A83A-000D3ABC4CF8",
    "4722C0A5-D02D-F011-A83A-000D3ABC4CF8",
    "3622C0A5-D02D-F011-A83A-000D3ABC4CF8",
    "27BDECC9-D02D-F011-A83A-000D3ABC4CF8",
    "434C04CA-D02D-F011-A83B-000D3AADDE39",
    "1EBDECC9-D02D-F011-A83A-000D3ABC4CF8",
    "0CF417EE-D02D-F011-A83B-000D3AADDE39",
    "FEF317EE-D02D-F011-A83B-000D3AADDE39",
    "5DCD17EE-D02D-F011-A83D-000D3A28753D",
    "B89317EE-D02D-F011-A83A-000D3ABC4CF8",
    "C19317EE-D02D-F011-A83A-000D3ABC4CF8",
    "00F417EE-D02D-F011-A83B-000D3AADDE39",
    "DF804412-D12D-F011-A83A-000D3ABC4CF8",
    "E1804412-D12D-F011-A83A-000D3ABC4CF8",
    "D5804412-D12D-F011-A83A-000D3ABC4CF8",
    "950E6412-D12D-F011-A83B-000D3AADDE39",
    "9E0E6412-D12D-F011-A83B-000D3AADDE39",
    "8DDC5212-D12D-F011-A83D-000D3A28753D",
    "1D45BF54-D12D-F011-A83D-000D3A28753D",
    "A4EDAB5A-D12D-F011-A83A-000D3ABC4CF8",
    "8839E47E-D12D-F011-A83B-000D3AADDE39",
    "0029B079-D12D-F011-A83D-000D3A28753D",
    "9139E47E-D12D-F011-A83B-000D3AADDE39",
    "E8798D7D-D12D-F011-A83A-000D3ABC4CF8",
    "0229B079-D12D-F011-A83D-000D3A28753D",
    "1129B079-D12D-F011-A83D-000D3A28753D",
    "87EDF4A2-D12D-F011-A83D-000D3A28753D",
    "85EDF4A2-D12D-F011-A83D-000D3A28753D",
    "4C4926A3-D12D-F011-A83B-000D3AADDE39",
    "9A94F2A2-D12D-F011-A83A-000D3ABC4CF8",
    "434926A3-D12D-F011-A83B-000D3AADDE39",
    "9394F2A2-D12D-F011-A83A-000D3ABC4CF8",
    "6FB543C7-D12D-F011-A83A-000D3ABC4CF8",
    "59C942C7-D12D-F011-A83D-000D3A28753D",
    "1DD785C6-D12D-F011-A83B-000D3AADDE39",
    "2E02A00C-D22D-F011-A83D-000D3A28753D",
    "1439F90D-D22D-F011-A83B-000D3AADDE39",
    "3602A00C-D22D-F011-A83D-000D3A28753D",
    "B5BCA033-D22D-F011-A83B-000D3AADDE39",
    "DACF112F-D22D-F011-A83D-000D3A28753D",
    "9BBCA033-D22D-F011-A83B-000D3AADDE39",
    "F3CF112F-D22D-F011-A83D-000D3A28753D",
    "99BCA033-D22D-F011-A83B-000D3AADDE39",
    "ACBCA033-D22D-F011-A83B-000D3AADDE39",
    "FACCAC33-D22D-F011-A83A-000D3ABC4CF8",
    "DCCF112F-D22D-F011-A83D-000D3A28753D",
    "03CDAC33-D22D-F011-A83A-000D3ABC4CF8",
    "DECF112F-D22D-F011-A83D-000D3A28753D",
    "AEBCA033-D22D-F011-A83B-000D3AADDE39",
    "D714B257-D22D-F011-A83A-000D3ABC4CF8",
    "4FF17F56-D22D-F011-A83B-000D3AADDE39",
    "059CC557-D22D-F011-A83D-000D3A28753D",
    "70D6E47B-D22D-F011-A83A-000D3ABC4CF8",
    "368CF07B-D22D-F011-A83D-000D3A28753D",
    "67D6E47B-D22D-F011-A83A-000D3ABC4CF8",
    "79D6E47B-D22D-F011-A83A-000D3ABC4CF8",
    "5ED6E47B-D22D-F011-A83A-000D3ABC4CF8",
    "3143E47B-D22D-F011-A83B-000D3AADDE39",
    "2843E47B-D22D-F011-A83B-000D3AADDE39",
    "2D8CF07B-D22D-F011-A83D-000D3A28753D",
    "B9A81BA0-D22D-F011-A83A-000D3ABC4CF8",
    "C1A81BA0-D22D-F011-A83A-000D3ABC4CF8",
    "BF131CA0-D22D-F011-A83B-000D3AADDE39",
    "D0A81BA0-D22D-F011-A83A-000D3ABC4CF8",
    "9ADBB69D-D22D-F011-A83D-000D3A28753D",
    "B7A81BA0-D22D-F011-A83A-000D3ABC4CF8",
    "9CDBB69D-D22D-F011-A83D-000D3A28753D",
    "619740C4-D22D-F011-A83B-000D3AADDE39",
    "952E85E8-D22D-F011-A83B-000D3AADDE39",
    "A81B08E6-D22D-F011-A83D-000D3A28753D",
    "1E8F89E8-D22D-F011-A83A-000D3ABC4CF8",
    "981B08E6-D22D-F011-A83D-000D3A28753D",
    "9F2E85E8-D22D-F011-A83B-000D3AADDE39",
    "882E85E8-D22D-F011-A83B-000D3AADDE39",
    "0F8F89E8-D22D-F011-A83A-000D3ABC4CF8",
    "278F89E8-D22D-F011-A83A-000D3ABC4CF8",
    "A21B08E6-D22D-F011-A83D-000D3A28753D",
    "862E85E8-D22D-F011-A83B-000D3AADDE39",
    "0D8F89E8-D22D-F011-A83A-000D3ABC4CF8",
    "E8BE2E31-D32D-F011-A83A-000D3ABC4CF8",
    "89240E31-D32D-F011-A83B-000D3AADDE39",
    "2E93B62F-D32D-F011-A83D-000D3A28753D",
    "65240E31-D32D-F011-A83B-000D3AADDE39",
    "80240E31-D32D-F011-A83B-000D3AADDE39",
    "3193B62F-D32D-F011-A83D-000D3A28753D",
    "F1BE2E31-D32D-F011-A83A-000D3ABC4CF8",
    "6E240E31-D32D-F011-A83B-000D3AADDE39",
    "77240E31-D32D-F011-A83B-000D3AADDE39",
    "35032C55-D32D-F011-A83B-000D3AADDE39",
    "C7804079-D32D-F011-A83A-000D3ABC4CF8",
    "80834179-D32D-F011-A83D-000D3A28753D",
    "82834179-D32D-F011-A83D-000D3A28753D",
    "95F7D39C-D32D-F011-A83B-000D3AADDE39",
    "A8DCAD9D-D32D-F011-A83A-000D3ABC4CF8",
    "B9DCAD9D-D32D-F011-A83A-000D3ABC4CF8",
    "8E758B9D-D32D-F011-A83D-000D3A28753D",
    "B0DCAD9D-D32D-F011-A83A-000D3ABC4CF8",
    "A1F7D39C-D32D-F011-A83B-000D3AADDE39",
    "9FF7D39C-D32D-F011-A83B-000D3AADDE39",
    "7ED298C1-D32D-F011-A83B-000D3AADDE39",
    "9AD298C1-D32D-F011-A83B-000D3AADDE39",
    "91D298C1-D32D-F011-A83B-000D3AADDE39",
    "77D298C1-D32D-F011-A83B-000D3AADDE39",
    "C4B699C1-D32D-F011-A83D-000D3A28753D",
    "CDB699C1-D32D-F011-A83D-000D3A28753D",
    "83D298C1-D32D-F011-A83B-000D3AADDE39",
    "B1C491C1-D32D-F011-A83A-000D3ABC4CF8",
    "D6B699C1-D32D-F011-A83D-000D3A28753D",
    "A135FA09-D42D-F011-A83B-000D3AADDE39",
    "1C28182E-D42D-F011-A83D-000D3A28753D",
    "C484282E-D42D-F011-A83B-000D3AADDE39",
    "55AA132E-D42D-F011-A83A-000D3ABC4CF8",
    "9FE44552-D42D-F011-A83A-000D3ABC4CF8",
    "23FC5A52-D42D-F011-A83B-000D3AADDE39",
    "74C26752-D42D-F011-A83D-000D3A28753D",
    "86C26752-D42D-F011-A83D-000D3A28753D",
    "A8E44552-D42D-F011-A83A-000D3ABC4CF8",
    "7DC26752-D42D-F011-A83D-000D3A28753D",
    "2FFC5A52-D42D-F011-A83B-000D3AADDE39",
    "2DFC5A52-D42D-F011-A83B-000D3AADDE39",
    "B1E44552-D42D-F011-A83A-000D3ABC4CF8",
    "CD45C276-D42D-F011-A83A-000D3ABC4CF8",
    "91CA5E74-D42D-F011-A83B-000D3AADDE39",
    "6B17F4BE-D42D-F011-A83A-000D3ABC4CF8",
    "AA8A13BF-D42D-F011-A83B-000D3AADDE39",
    "068F35E3-D42D-F011-A83B-000D3AADDE39",
    "5B1B2FE3-D42D-F011-A83D-000D3A28753D",
    "DCB310DF-D42D-F011-A83A-000D3ABC4CF8",
    "E5B310DF-D42D-F011-A83A-000D3ABC4CF8",
    "841B2FE3-D42D-F011-A83D-000D3A28753D",
    "0F8F35E3-D42D-F011-A83B-000D3AADDE39",
    "7B1B2FE3-D42D-F011-A83D-000D3A28753D",
    "581B2FE3-D42D-F011-A83D-000D3A28753D",
    "681B2FE3-D42D-F011-A83D-000D3A28753D",
    "721B2FE3-D42D-F011-A83D-000D3A28753D",
    "8D1B2FE3-D42D-F011-A83D-000D3A28753D",
    "6C2B3807-D52D-F011-A83D-000D3A28753D",
    "86E94607-D52D-F011-A83A-000D3ABC4CF8",
    "015E4E2B-D52D-F011-A83D-000D3A28753D",
    "CD685372-D52D-F011-A83D-000D3A28753D",
    "C5359073-D52D-F011-A83B-000D3AADDE39",
    "DC5B6E6F-D52D-F011-A83A-000D3ABC4CF8",
    "D1685372-D52D-F011-A83D-000D3A28753D",
    "CF685372-D52D-F011-A83D-000D3A28753D",
    "BC359073-D52D-F011-A83B-000D3AADDE39",
    "AD6BB197-D52D-F011-A83A-000D3ABC4CF8",
    "AF992298-D52D-F011-A83B-000D3AADDE39",
    "9D16CC97-D52D-F011-A83D-000D3A28753D",
    "B66BB197-D52D-F011-A83A-000D3ABC4CF8",
    "8F16CC97-D52D-F011-A83D-000D3A28753D",
    "8E16CC97-D52D-F011-A83D-000D3A28753D",
    "C86BB197-D52D-F011-A83A-000D3ABC4CF8",
    "BF6BB197-D52D-F011-A83A-000D3ABC4CF8",
    "9BE7F1BB-D52D-F011-A83D-000D3A28753D",
    "024008BC-D52D-F011-A83A-000D3ABC4CF8",
    "C4E6F7BB-D52D-F011-A83B-000D3AADDE39",
    "0C790AE0-D52D-F011-A83A-000D3ABC4CF8",
    "FB2024E0-D52D-F011-A83B-000D3AADDE39",
    "1E230CE0-D52D-F011-A83D-000D3A28753D",
    "0F230CE0-D52D-F011-A83D-000D3A28753D",
    "0D230CE0-D52D-F011-A83D-000D3A28753D",
    "042124E0-D52D-F011-A83B-000D3AADDE39",
    "F96C4D04-D62D-F011-A83A-000D3ABC4CF8",
    "9C2E2B04-D62D-F011-A83B-000D3AADDE39",
    "3E003E28-D62D-F011-A83D-000D3A28753D",
    "05975728-D62D-F011-A83A-000D3ABC4CF8",
    "35003E28-D62D-F011-A83D-000D3A28753D",
    "B9989D4A-D62D-F011-A83B-000D3AADDE39",
    "C2989D4A-D62D-F011-A83B-000D3AADDE39",
    "BDCB694C-D62D-F011-A83A-000D3ABC4CF8",
    "B4CB694C-D62D-F011-A83A-000D3ABC4CF8",
    "435E674C-D62D-F011-A83D-000D3A28753D",
    "4B5E674C-D62D-F011-A83D-000D3A28753D",
    "545E674C-D62D-F011-A83D-000D3A28753D",
    "F84D9670-D62D-F011-A83B-000D3AADDE39",
    "1C456B70-D62D-F011-A83A-000D3ABC4CF8",
    "25456B70-D62D-F011-A83A-000D3ABC4CF8",
    "2E456B70-D62D-F011-A83A-000D3ABC4CF8",
    "05BAD3DC-D62D-F011-A83D-000D3A28753D",
    "FCB9D3DC-D62D-F011-A83D-000D3A28753D",
    "40AB3CFC-D62D-F011-A83A-000D3ABC4CF8",
    "4AAB3CFC-D62D-F011-A83A-000D3ABC4CF8",
    "7B84EF00-D72D-F011-A83B-000D3AADDE39",
    "7D84EF00-D72D-F011-A83B-000D3AADDE39",
    "51AB3CFC-D62D-F011-A83A-000D3ABC4CF8",
    "80679CFD-D62D-F011-A83D-000D3A28753D",
    "DECB3D49-D72D-F011-A83B-000D3AADDE39",
    "A9DB4C49-D72D-F011-A83A-000D3ABC4CF8",
    "CBCB3D49-D72D-F011-A83B-000D3AADDE39",
    "C4CB3D49-D72D-F011-A83B-000D3AADDE39",
    "B3DB4C49-D72D-F011-A83A-000D3ABC4CF8",
    "BACB3D49-D72D-F011-A83B-000D3AADDE39",
    "C3DB4C49-D72D-F011-A83A-000D3ABC4CF8",
    "D5CB3D49-D72D-F011-A83B-000D3AADDE39",
    "C5DB4C49-D72D-F011-A83A-000D3ABC4CF8",
    "D4DB4C49-D72D-F011-A83A-000D3ABC4CF8",
    "ACDB4C49-D72D-F011-A83A-000D3ABC4CF8",
    "54C7566D-D72D-F011-A83D-000D3A28753D",
    "4BC7566D-D72D-F011-A83D-000D3A28753D",
    "1CEA2F6C-D72D-F011-A83B-000D3AADDE39",
    "7047AE68-D72D-F011-A83A-000D3ABC4CF8",
    "5A409D91-D72D-F011-A83B-000D3AADDE39",
    "050E8D91-D72D-F011-A83D-000D3A28753D",
    "43877991-D72D-F011-A83A-000D3ABC4CF8",
    "0E0E8D91-D72D-F011-A83D-000D3A28753D",
    "5C409D91-D72D-F011-A83B-000D3AADDE39",
    "431FEDB5-D72D-F011-A83B-000D3AADDE39",
    "F71DF2D9-D72D-F011-A83A-000D3ABC4CF8",
    "C63D25DA-D72D-F011-A83B-000D3AADDE39",
    "C83D25DA-D72D-F011-A83B-000D3AADDE39",
    "001EF2D9-D72D-F011-A83A-000D3ABC4CF8",
    "132FE8D9-D72D-F011-A83D-000D3A28753D",
    "CDD2F3FD-D72D-F011-A83D-000D3A28753D",
    "52DD981E-D82D-F011-A83B-000D3AADDE39",
    "6B712E22-D82D-F011-A83A-000D3ABC4CF8",
    "69712E22-D82D-F011-A83A-000D3ABC4CF8",
    "FBC42522-D82D-F011-A83D-000D3A28753D",
    "04C52522-D82D-F011-A83D-000D3A28753D",
    "0DC52522-D82D-F011-A83D-000D3A28753D",
    "50DD981E-D82D-F011-A83B-000D3AADDE39",
    "BAC57145-D82D-F011-A83B-000D3AADDE39",
    "4E693A46-D82D-F011-A83A-000D3ABC4CF8",
    "8EB85046-D82D-F011-A83D-000D3A28753D",
    "9C67756A-D82D-F011-A83A-000D3ABC4CF8",
    "BBF97E6A-D82D-F011-A83D-000D3A28753D",
    "6E12A26A-D82D-F011-A83B-000D3AADDE39",
    "8167756A-D82D-F011-A83A-000D3ABC4CF8",
    "CDF97E6A-D82D-F011-A83D-000D3A28753D",
    "C4F97E6A-D82D-F011-A83D-000D3A28753D",
    "9367756A-D82D-F011-A83A-000D3ABC4CF8",
    "8A67756A-D82D-F011-A83A-000D3ABC4CF8",
    "7E477689-D82D-F011-A83A-000D3ABC4CF8",
    "6C477689-D82D-F011-A83A-000D3ABC4CF8",
    "74477689-D82D-F011-A83A-000D3ABC4CF8",
    "B7949C8E-D82D-F011-A83D-000D3A28753D",
    "B3949C8E-D82D-F011-A83D-000D3A28753D",
    "AE949C8E-D82D-F011-A83D-000D3A28753D",
    "7CF5E288-D82D-F011-A83B-000D3AADDE39",
    "ACF3C1B2-D82D-F011-A83A-000D3ABC4CF8",
    "07030CFB-D82D-F011-A83A-000D3ABC4CF8",
    "20601BFB-D82D-F011-A83B-000D3AADDE39",
    "BD5754FB-D82D-F011-A83D-000D3A28753D",
    "E1020CFB-D82D-F011-A83A-000D3ABC4CF8",
    "DC020CFB-D82D-F011-A83A-000D3ABC4CF8",
    "13030CFB-D82D-F011-A83A-000D3ABC4CF8",
    "32601BFB-D82D-F011-A83B-000D3AADDE39",
    "29601BFB-D82D-F011-A83B-000D3AADDE39",
    "11030CFB-D82D-F011-A83A-000D3ABC4CF8",
    "DE020CFB-D82D-F011-A83A-000D3ABC4CF8",
    "BE5754FB-D82D-F011-A83D-000D3A28753D",
    "F6020CFB-D82D-F011-A83A-000D3ABC4CF8",
    "F9020CFB-D82D-F011-A83A-000D3ABC4CF8",
    "E900BB43-D92D-F011-A83B-000D3AADDE39",
    "31348267-D92D-F011-A83D-000D3A28753D",
    "2F348267-D92D-F011-A83D-000D3A28753D",
    "083E4465-D92D-F011-A83B-000D3AADDE39",
    "D7936267-D92D-F011-A83A-000D3ABC4CF8",
    "113E4465-D92D-F011-A83B-000D3AADDE39",
    "E8936267-D92D-F011-A83A-000D3ABC4CF8",
    "D9936267-D92D-F011-A83A-000D3ABC4CF8",
    "CD936267-D92D-F011-A83A-000D3ABC4CF8",
    "2DBFC388-D92D-F011-A83A-000D3ABC4CF8",
    "9F49818B-D92D-F011-A83D-000D3A28753D",
    "2E17BFF7-D92D-F011-A83D-000D3A28753D",
    "60CBC8F7-D92D-F011-A83B-000D3AADDE39",
    "2517BFF7-D92D-F011-A83D-000D3A28753D",
    "68CBC8F7-D92D-F011-A83B-000D3AADDE39",
    "AD260CF6-D92D-F011-A83A-000D3ABC4CF8",
    "5926EC1B-DA2D-F011-A83A-000D3ABC4CF8",
    "8026EC1B-DA2D-F011-A83A-000D3ABC4CF8",
    "4443DF19-DA2D-F011-A83B-000D3AADDE39",
    "A377FF1B-DA2D-F011-A83D-000D3A28753D",
    "3B43DF19-DA2D-F011-A83B-000D3AADDE39",
    "A177FF1B-DA2D-F011-A83D-000D3A28753D",
    "5526EC1B-DA2D-F011-A83A-000D3ABC4CF8",
    "7726EC1B-DA2D-F011-A83A-000D3ABC4CF8",
    "9777FF1B-DA2D-F011-A83D-000D3A28753D",
    "5726EC1B-DA2D-F011-A83A-000D3ABC4CF8",
    "6E26EC1B-DA2D-F011-A83A-000D3ABC4CF8",
    "41361440-DA2D-F011-A83A-000D3ABC4CF8",
    "9BBB1C40-DA2D-F011-A83B-000D3AADDE39",
    "4A361440-DA2D-F011-A83A-000D3ABC4CF8",
    "B6E67A40-DA2D-F011-A83D-000D3A28753D",
    "ACEA77AC-DA2D-F011-A83B-000D3AADDE39",
    "A3EA77AC-DA2D-F011-A83B-000D3AADDE39",
    "BA0DAAA6-DA2D-F011-A83A-000D3ABC4CF8",
    "B5EA77AC-DA2D-F011-A83B-000D3AADDE39",
    "FA578DAC-DA2D-F011-A83D-000D3A28753D",
    "C382A2AC-DA2D-F011-A83A-000D3ABC4CF8",
    "73C9BCD0-DA2D-F011-A83B-000D3AADDE39",
    "8CC9BCD0-DA2D-F011-A83B-000D3AADDE39",
    "95C9BCD0-DA2D-F011-A83B-000D3AADDE39",
    "75C9BCD0-DA2D-F011-A83B-000D3AADDE39",
    "227ACBD0-DA2D-F011-A83A-000D3ABC4CF8",
    "7FC9BCD0-DA2D-F011-A83B-000D3AADDE39",
    "107ACBD0-DA2D-F011-A83A-000D3ABC4CF8",
    "197ACBD0-DA2D-F011-A83A-000D3ABC4CF8",
    "0DA0E6F4-DA2D-F011-A83B-000D3AADDE39",
    "12E8EDF4-DA2D-F011-A83A-000D3ABC4CF8",
    "33A37FF5-DA2D-F011-A83D-000D3A28753D",
    "B25882EF-DA2D-F011-A83D-000D3A28753D",
    "1BE8EDF4-DA2D-F011-A83A-000D3ABC4CF8",
    "09E8EDF4-DA2D-F011-A83A-000D3ABC4CF8",
    "B5320A19-DB2D-F011-A83A-000D3ABC4CF8",
    "9BD31419-DB2D-F011-A83D-000D3A28753D",
    "92D31419-DB2D-F011-A83D-000D3A28753D",
    "AC320A19-DB2D-F011-A83A-000D3ABC4CF8",
    "20641C19-DB2D-F011-A83B-000D3AADDE39",
    "A3320A19-DB2D-F011-A83A-000D3ABC4CF8",
    "47D24B61-DB2D-F011-A83D-000D3A28753D",
    "013C8F5E-DB2D-F011-A83B-000D3AADDE39",
    "CC9A5E61-DB2D-F011-A83A-000D3ABC4CF8",
    "62D24B61-DB2D-F011-A83D-000D3A28753D",
    "3ED24B61-DB2D-F011-A83D-000D3A28753D",
    "53D24B61-DB2D-F011-A83D-000D3A28753D",
    "D59A5E61-DB2D-F011-A83A-000D3ABC4CF8",
    "51D24B61-DB2D-F011-A83D-000D3A28753D",
    "DE9A5E61-DB2D-F011-A83A-000D3ABC4CF8",
    "77707185-DB2D-F011-A83A-000D3ABC4CF8",
    "7F707185-DB2D-F011-A83A-000D3ABC4CF8",
    "498183A9-DB2D-F011-A83D-000D3A28753D",
    "408183A9-DB2D-F011-A83D-000D3A28753D",
    "6400A1CD-DB2D-F011-A83A-000D3ABC4CF8",
    "08CAB1CD-DB2D-F011-A83B-000D3AADDE39",
    "11CAB1CD-DB2D-F011-A83B-000D3AADDE39",
    "27F132F1-DB2D-F011-A83A-000D3ABC4CF8",
    "651CFDF1-DB2D-F011-A83B-000D3AADDE39",
    "0CF132F1-DB2D-F011-A83A-000D3ABC4CF8",
    "641CFDF1-DB2D-F011-A83B-000D3AADDE39",
    "15F132F1-DB2D-F011-A83A-000D3ABC4CF8",
    "1EF132F1-DB2D-F011-A83A-000D3ABC4CF8",
    "064EF1F1-DB2D-F011-A83D-000D3A28753D",
    "044EF1F1-DB2D-F011-A83D-000D3A28753D",
    "3DEE3016-DC2D-F011-A83D-000D3A28753D",
    "87861916-DC2D-F011-A83B-000D3AADDE39",
    "A1861916-DC2D-F011-A83B-000D3AADDE39",
    "D7A66B16-DC2D-F011-A83A-000D3ABC4CF8",
    "98861916-DC2D-F011-A83B-000D3AADDE39",
    "8A861916-DC2D-F011-A83B-000D3AADDE39",
    "AA861916-DC2D-F011-A83B-000D3AADDE39",
    "E64F583A-DC2D-F011-A83D-000D3A28753D",
    "7057985E-DC2D-F011-A83B-000D3AADDE39",
    "41C0855E-DC2D-F011-A83A-000D3ABC4CF8",
    "6D57985E-DC2D-F011-A83B-000D3AADDE39",
    "35C0855E-DC2D-F011-A83A-000D3ABC4CF8",
    "3FC0855E-DC2D-F011-A83A-000D3ABC4CF8",
    "F737C182-DC2D-F011-A83D-000D3A28753D",
    "1C85BE82-DC2D-F011-A83B-000D3AADDE39",
    "0C38C182-DC2D-F011-A83D-000D3A28753D",
    "0038C182-DC2D-F011-A83D-000D3A28753D",
    "7E82C182-DC2D-F011-A83A-000D3ABC4CF8",
    "6C82C182-DC2D-F011-A83A-000D3ABC4CF8",
    "0A38C182-DC2D-F011-A83D-000D3A28753D",
    "2E85BE82-DC2D-F011-A83B-000D3AADDE39",
    "2685BE82-DC2D-F011-A83B-000D3AADDE39",
    "7582C182-DC2D-F011-A83A-000D3ABC4CF8",
    "79C32BCB-DC2D-F011-A83A-000D3ABC4CF8",
    "77C32BCB-DC2D-F011-A83A-000D3ABC4CF8",
    "7EC32BCB-DC2D-F011-A83A-000D3ABC4CF8",
    "9E0C37EF-DC2D-F011-A83D-000D3A28753D",
    "D51B48EF-DC2D-F011-A83B-000D3AADDE39",
    "9C0C37EF-DC2D-F011-A83D-000D3A28753D",
    "21A83FEF-DC2D-F011-A83A-000D3ABC4CF8",
    "CC1B48EF-DC2D-F011-A83B-000D3AADDE39",
    "18A83FEF-DC2D-F011-A83A-000D3ABC4CF8",
    "0FA83FEF-DC2D-F011-A83A-000D3ABC4CF8",
    "25D56613-DD2D-F011-A83B-000D3AADDE39",
    "E62F5713-DD2D-F011-A83D-000D3A28753D",
    "2C3E4013-DD2D-F011-A83A-000D3ABC4CF8",
    "79568858-DD2D-F011-A83A-000D3ABC4CF8",
    "7619A85B-DD2D-F011-A83D-000D3A28753D",
    "F9269D5B-DD2D-F011-A83B-000D3AADDE39",
    "81568858-DD2D-F011-A83A-000D3ABC4CF8",
    "7F19A85B-DD2D-F011-A83D-000D3A28753D",
    "FF269D5B-DD2D-F011-A83B-000D3AADDE39",
    "4310DB7F-DD2D-F011-A83B-000D3AADDE39",
    "A0AADE7F-DD2D-F011-A83A-000D3ABC4CF8",
    "4110DB7F-DD2D-F011-A83B-000D3AADDE39",
    "4E10DB7F-DD2D-F011-A83B-000D3AADDE39",
    "B05FE3A3-DD2D-F011-A83D-000D3A28753D",
    "B85FE3A3-DD2D-F011-A83D-000D3A28753D",
    "DB06F7A3-DD2D-F011-A83A-000D3ABC4CF8",
    "73A69EC4-DD2D-F011-A83B-000D3AADDE39",
    "64A69EC4-DD2D-F011-A83B-000D3AADDE39",
    "2F733BC8-DD2D-F011-A83A-000D3ABC4CF8",
    "B68939C8-DD2D-F011-A83D-000D3A28753D",
    "62A69EC4-DD2D-F011-A83B-000D3AADDE39",
    "B88939C8-DD2D-F011-A83D-000D3A28753D",
    "335C64EC-DD2D-F011-A83A-000D3ABC4CF8",
    "DBF464EC-DD2D-F011-A83B-000D3AADDE39",
    "EE669610-DE2D-F011-A83B-000D3AADDE39",
    "DF438B10-DE2D-F011-A83D-000D3A28753D",
    "DF669610-DE2D-F011-A83B-000D3AADDE39",
    "F4438B10-DE2D-F011-A83D-000D3A28753D",
    "E6438B10-DE2D-F011-A83D-000D3A28753D",
    "E1669610-DE2D-F011-A83B-000D3AADDE39",
    "DA438B10-DE2D-F011-A83D-000D3A28753D",
    "110FA634-DE2D-F011-A83A-000D3ABC4CF8",
    "DA78F357-DE2D-F011-A83B-000D3AADDE39",
    "02D2C158-DE2D-F011-A83D-000D3A28753D",
    "F9D1C158-DE2D-F011-A83D-000D3A28753D",
    "DFC6047D-DE2D-F011-A83D-000D3A28753D",
    "1ECCC77C-DE2D-F011-A83A-000D3ABC4CF8",
    "15CCC77C-DE2D-F011-A83A-000D3ABC4CF8",
    "0ACF027D-DE2D-F011-A83B-000D3AADDE39",
    "27B6F5A0-DE2D-F011-A83A-000D3ABC4CF8",
    "2284FCA0-DE2D-F011-A83D-000D3A28753D",
    "1984FCA0-DE2D-F011-A83D-000D3A28753D",
    "1EB6F5A0-DE2D-F011-A83A-000D3ABC4CF8",
    "C914D39E-DE2D-F011-A83B-000D3AADDE39",
    "8C4807C5-DE2D-F011-A83D-000D3A28753D",
    "71F413C5-DE2D-F011-A83B-000D3AADDE39",
    "954807C5-DE2D-F011-A83D-000D3A28753D",
    "69F413C5-DE2D-F011-A83B-000D3AADDE39",
    "5CCB4EC5-DE2D-F011-A83A-000D3ABC4CF8",
    "A10358E9-DE2D-F011-A83B-000D3AADDE39",
    "A00358E9-DE2D-F011-A83B-000D3AADDE39",
    "C707860D-DF2D-F011-A83D-000D3A28753D",
    "2B18AD31-DF2D-F011-A83D-000D3A28753D",
    "3718AD31-DF2D-F011-A83D-000D3A28753D",
    "4F18AD31-DF2D-F011-A83D-000D3A28753D",
    "4718AD31-DF2D-F011-A83D-000D3A28753D",
    "7361A431-DF2D-F011-A83B-000D3AADDE39",
    "74F1BB31-DF2D-F011-A83A-000D3ABC4CF8",
    "7561A431-DF2D-F011-A83B-000D3AADDE39",
    "6961A431-DF2D-F011-A83B-000D3AADDE39",
    "6BF1BB31-DF2D-F011-A83A-000D3ABC4CF8",
    "3518AD31-DF2D-F011-A83D-000D3A28753D",
    "F31ECD55-DF2D-F011-A83D-000D3A28753D",
    "74D5D755-DF2D-F011-A83B-000D3AADDE39",
    "8E2DCF55-DF2D-F011-A83A-000D3ABC4CF8",
    "E41ECD55-DF2D-F011-A83D-000D3A28753D",
    "E21ECD55-DF2D-F011-A83D-000D3A28753D",
    "6D5CEA79-DF2D-F011-A83D-000D3A28753D",
    "525CEA79-DF2D-F011-A83D-000D3A28753D",
    "2FE87279-DF2D-F011-A83B-000D3AADDE39",
    "B5D8E979-DF2D-F011-A83A-000D3ABC4CF8",
    "5B5CEA79-DF2D-F011-A83D-000D3A28753D",
    "645CEA79-DF2D-F011-A83D-000D3A28753D",
    "86311FC2-DF2D-F011-A83D-000D3A28753D",
    "D30295C1-DF2D-F011-A83B-000D3AADDE39",
    "72E922C2-DF2D-F011-A83A-000D3ABC4CF8",
    "84311FC2-DF2D-F011-A83D-000D3A28753D",
    "69E922C2-DF2D-F011-A83A-000D3ABC4CF8",
    "CA0295C1-DF2D-F011-A83B-000D3AADDE39",
    "88311FC2-DF2D-F011-A83D-000D3A28753D",
    "96643CE6-DF2D-F011-A83D-000D3A28753D",
    "A8643CE6-DF2D-F011-A83D-000D3A28753D",
    "09BA51E6-DF2D-F011-A83B-000D3AADDE39",
    "62B468E5-DF2D-F011-A83A-000D3ABC4CF8",
    "9F643CE6-DF2D-F011-A83D-000D3A28753D",
    "12BA51E6-DF2D-F011-A83B-000D3AADDE39",
    "C767640A-E02D-F011-A83A-000D3ABC4CF8",
    "144F7D0A-E02D-F011-A83B-000D3AADDE39",
    "7C58AD2E-E02D-F011-A83B-000D3AADDE39",
    "EBD6032B-E02D-F011-A83A-000D3ABC4CF8",
    "F4D6032B-E02D-F011-A83A-000D3ABC4CF8",
    "8458AD2E-E02D-F011-A83B-000D3AADDE39",
    "77748F2E-E02D-F011-A83D-000D3A28753D",
    "80748F2E-E02D-F011-A83D-000D3A28753D",
    "8D58AD2E-E02D-F011-A83B-000D3AADDE39",
    "6E748F2E-E02D-F011-A83D-000D3A28753D",
    "3CA81C53-E02D-F011-A83A-000D3ABC4CF8",
    "966D2353-E02D-F011-A83D-000D3A28753D",
    "3EA81C53-E02D-F011-A83A-000D3ABC4CF8",
    "4DA81C53-E02D-F011-A83A-000D3ABC4CF8",
    "946D2353-E02D-F011-A83D-000D3A28753D",
    "19D31072-E02D-F011-A83A-000D3ABC4CF8",
    "B4D7D876-E02D-F011-A83B-000D3AADDE39",
    "28D31072-E02D-F011-A83A-000D3ABC4CF8",
    "BDD7D876-E02D-F011-A83B-000D3AADDE39",
    "18D31072-E02D-F011-A83A-000D3ABC4CF8",
    "8A24439B-E02D-F011-A83D-000D3A28753D",
    "F2B3439B-E02D-F011-A83B-000D3AADDE39",
    "DD4F2F9B-E02D-F011-A83A-000D3ABC4CF8",
    "0FAEBFDE-E02D-F011-A83D-000D3A28753D",
    "18AEBFDE-E02D-F011-A83D-000D3A28753D",
    "4F5175E3-E02D-F011-A83A-000D3ABC4CF8",
    "465175E3-E02D-F011-A83A-000D3ABC4CF8",
    "B36C5404-E12D-F011-A83B-000D3AADDE39",
    "0F98A907-E12D-F011-A83A-000D3ABC4CF8",
    "1198A907-E12D-F011-A83A-000D3ABC4CF8",
    "2098A907-E12D-F011-A83A-000D3ABC4CF8", // one time failed
    "BC6C5404-E12D-F011-A83B-000D3AADDE39",
    "62ACAA07-E12D-F011-A83D-000D3A28753D",
    "59ACAA07-E12D-F011-A83D-000D3A28753D",
    "0598A907-E12D-F011-A83A-000D3ABC4CF8",
    "6BACAA07-E12D-F011-A83D-000D3A28753D",
    "50ACAA07-E12D-F011-A83D-000D3A28753D",
    "23F50274-E12D-F011-A83D-000D3A28753D",
    "DDAC1074-E12D-F011-A83A-000D3ABC4CF8",
    "57340D74-E12D-F011-A83B-000D3AADDE39",
    "55340D74-E12D-F011-A83B-000D3AADDE39",
    "DBAC1074-E12D-F011-A83A-000D3ABC4CF8",
    "03E71898-E12D-F011-A83D-000D3A28753D",
    "1E910A98-E12D-F011-A83A-000D3ABC4CF8",
    "27910A98-E12D-F011-A83A-000D3ABC4CF8",
    "8D642AFF-E12D-F011-A83D-000D3A28753D",
    "C0777704-E22D-F011-A83A-000D3ABC4CF8",
    "C2777704-E22D-F011-A83A-000D3ABC4CF8",
    "96642AFF-E12D-F011-A83D-000D3A28753D",
    "AE777704-E22D-F011-A83A-000D3ABC4CF8",
    "20A73B02-E22D-F011-A83B-000D3AADDE39"

];

export const addAddon = async (req, res) => {

    // console.log(addOn,"addOn")
    const { addOn } = req.body;

    console.log(req.body)
    if (!addOn) return res.status(400).json({ error: 'Missing addOn in request body' });

    try {
        const results = [];
        let token = await getNewAccessToken();

        for (const subscriptionId of subscriptions) {
            let success = false;

            while (!success) {
                try {
                    const url = `${process.env.API_URL}/${subscriptionId}/addOns`;
                    const headers = {
                        'Ocp-Apim-Subscription-Key': process.env.API_KEY,
                        'InitiatorID': process.env.INITIATOR_ID,
                        'Accept': 'application/json',
                        'TransactionID': process.env.TRANSACTION_ID,
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json',
                        'Cookie': process.env.COOKIE,
                    };




                    const response = await axios.post(url, { addOn }, { headers });
                    console.log(`✅ Success: Add-on applied to subscriptionId: ${subscriptionId}`);

                    results.push({
                        subscriptionId,
                        status: response.status,
                        data: response.data,
                        success: true,
                    });

                    success = true;
                    await new Promise((resolve) => setTimeout(resolve, 300));
                } catch (error) {
                    const status = error?.response?.status;
                    console.error(`❌ Error: Failed for subscriptionId: ${subscriptionId}`);
                    console.error('📄 Status:', status || 'Unknown');
                    console.error('📄 Details:', error?.response?.data || error.message);

                    if (status === 401) {
                        token = await getNewAccessToken();
                    } else {
                        results.push({
                            subscriptionId,
                            status: status || 500,
                            error: error.response?.data || error.message,
                            success: false,
                        });
                        success = true;
                    }
                }
            }
        }

        const successList = results.filter((r) => r.success).map((r) => r.subscriptionId);
        const errorList = results.filter((r) => !r.success).map((r) => ({
            subscriptionId: r.subscriptionId,
            status: r.status,
            error: r.error,
        }));

        res.status(200).json({ message: 'Add-on process complete', successList, errorList, results });
    } catch (err) {
        res.status(500).json({ error: 'Unexpected failure', details: err.message });
    }
};
